<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Admin Panel - iWATCH TV</title>
    <meta name="author" content="MiniMax Agent">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- iOS Meta Tags -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="iWATCH Admin">
    
    <!-- Theme Colors -->
    <meta name="theme-color" content="#4caf50">
    <meta name="msapplication-TileColor" content="#4caf50">
    
    <!-- Prevent zoom on input focus -->
    <style>
        input, select, textarea {
            font-size: 16px !important;
        }
    </style>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            --accent-blue: #667eea;
            --accent-purple: #764ba2;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --error-color: #f44336;
            --focus-color: #667eea;
            --admin-color: #4caf50;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--primary-gradient);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Performance optimizations */
        .admin-container {
            min-height: 100vh;
        }

        .admin-sidebar {
            background: rgba(0, 0, 0, 0.8);
            padding: 30px 20px;
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
            transition: transform 0.3s ease;
        }

        .admin-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--glass-border);
        }

        .admin-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--admin-color), #66bb6a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: white;
            margin: 0 auto 15px;
            box-shadow: 0 15px 35px rgba(76, 175, 80, 0.4);
        }

        .admin-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--admin-color);
            margin-bottom: 5px;
        }

        .admin-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .admin-nav {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 10px;
        }

        .nav-btn {
            width: 100%;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            color: var(--text-primary);
            padding: 15px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
            font-weight: 500;
            text-align: left;
        }

        .nav-btn:hover {
            background: rgba(76, 175, 80, 0.2);
            border-color: var(--admin-color);
            transform: translateX(5px);
        }

        .nav-btn.active {
            background: linear-gradient(135deg, var(--admin-color), #66bb6a);
            border-color: transparent;
            color: white;
        }

        .nav-icon {
            font-size: 18px;
        }

        .admin-main {
            padding: 40px;
            overflow-y: auto;
            margin-left: 300px;
            min-height: 100vh;
            position: relative;
            z-index: 1;
            width: calc(100% - 300px);
            box-sizing: border-box;
        }

        .dashboard-header {
            margin-bottom: 40px;
        }

        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .dashboard-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .stat-icon.users {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .stat-icon.revenue {
            background: linear-gradient(135deg, #4caf50, #66bb6a);
        }

        .stat-icon.content {
            background: linear-gradient(135deg, #ff9800, #ffb74d);
        }

        .stat-icon.system {
            background: linear-gradient(135deg, #9c27b0, #ba68c8);
        }

        .stat-icon.satellite {
            background: linear-gradient(135deg, #00bcd4, #26c6da);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .section-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
        }

        .section-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 15px;
            padding: 30px;
            backdrop-filter: blur(20px);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--admin-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-icon {
            font-size: 1.8rem;
        }

        /* Mobile Responsive Design */
        @media (max-width: 768px) {
            .admin-container {
            }

            .admin-sidebar {
                position: fixed;
                top: 0;
                left: 0;
                width: 280px;
                height: 100vh;
                transform: translateX(-100%);
                z-index: 1001;
            }

            .admin-sidebar.show {
                transform: translateX(0);
            }

            .admin-main {
                margin-left: 0;
                padding: 20px;
                width: 100%;
            }

            .dashboard-title {
                font-size: 2rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }

            .stat-card {
                padding: 20px;
            }

            .stat-value {
                font-size: 1.8rem;
            }

            .section-grid {
                grid-template-columns: 1fr;
            }

            .section-card {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .admin-main {
                padding: 15px;
            }

            .dashboard-title {
                font-size: 1.8rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .stat-card {
                padding: 15px;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .section-card {
                padding: 15px;
            }
        }

        /* Mobile menu toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1002;
            background: var(--admin-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--admin-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Button styles */
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2196f3, #42a5f5);
            color: white;
        }

        .btn-success {
            background: var(--admin-color);
            color: white;
        }

        .btn-warning {
            background: linear-gradient(135deg, #ff9800, #ffb74d);
            color: white;
        }

        .btn-info {
            background: linear-gradient(135deg, #00bcd4, #26c6da);
            color: white;
        }
    </style>
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">‚ò∞</button>

    <div class="admin-container">
        <!-- Sidebar Navigation -->
        <aside class="admin-sidebar" id="sidebar">
            <div class="admin-header">
                <div class="admin-logo">üîß</div>
                <h1 class="admin-title">Admin Panel</h1>
                <p class="admin-subtitle">iWATCH TV System</p>
            </div>
            
            <nav class="admin-nav">
                <div class="nav-item">
                    <button class="nav-btn active" onclick="showSection('dashboard', event)">
                        <span class="nav-icon">üìä</span>
                        Dashboard
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('users', event)">
                        <span class="nav-icon">üë•</span>
                        Users & Customers
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('content', event)">
                        <span class="nav-icon">üì∫</span>
                        Content Library
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('packages', event)">
                        <span class="nav-icon">üì¶</span>
                        Packages & Pricing
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('resellers', event)">
                        <span class="nav-icon">üè¢</span>
                        Reseller Management
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('credit', event)">
                        <span class="nav-icon">üí∞</span>
                        Credit Manager
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('satellite', event)">
                        <span class="nav-icon">üõ∞Ô∏è</span>
                        Satellite Config
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('analytics', event)">
                        <span class="nav-icon">üìà</span>
                        Analytics
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('settings', event)">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        Settings
                    </button>
                </div>
                <div class="nav-item">
                    <button class="nav-btn" onclick="showSection('logs', event)">
                        <span class="nav-icon">üìã</span>
                        System Logs
                    </button>
                </div>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="admin-main">
            <div class="dashboard-header">
                <h1 class="dashboard-title">üîß Welcome to Admin Panel</h1>
                <p class="dashboard-subtitle">iWATCH TV Management System - Ready to use!</p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon users">üë•</div>
                    <div class="stat-value">0</div>
                    <div class="stat-label">Total Users</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon content">üì¶</div>
                    <div class="stat-value">0</div>
                    <div class="stat-label">Packages</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon system">üîß</div>
                    <div class="stat-value">0</div>
                    <div class="stat-label">Add-ons</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon revenue">üí∞</div>
                    <div class="stat-value">12</div>
                    <div class="stat-label">Resellers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon satellite">üõ∞Ô∏è</div>
                    <div class="stat-value">400</div>
                    <div class="stat-label">HD Channels</div>
                </div>
            </div>
            
            <div class="section-grid">
                <div class="section-card">
                    <h3 class="section-title">üìä Quick Actions</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button onclick="showSection('users')" class="btn btn-primary">View Users</button>
                        <button onclick="showSection('packages')" class="btn btn-warning">Manage Packages</button>
                        <button onclick="showSection('resellers')" class="btn btn-info">Manage Resellers</button>
                        <button onclick="showSection('satellite')" class="btn btn-success">üõ∞Ô∏è Satellite Config</button>
                    </div>
                </div>
                
                <div class="section-card">
                    <h3 class="section-title">üéØ System Status</h3>
                    <div style="display: flex; flex-direction: column; gap: 8px; font-size: 13px; color: rgba(255,255,255,0.8);">
                        <div style="display: flex; justify-content: space-between;">
                            <span>Admin Panel:</span>
                            <span style="color: #4caf50;">‚úÖ Online</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Credit System:</span>
                            <span style="color: #4caf50;">‚úÖ Active</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Reseller Panels:</span>
                            <span style="color: #4caf50;">‚úÖ 12 Ready</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Package System:</span>
                            <span style="color: #4caf50;">‚úÖ Ready</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>Satellite System:</span>
                            <span style="color: #4caf50;">‚úÖ 400 HD Ready</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        // Enhanced Password Management System
        const passwordManager = {
            passwords: {
                'adminLogin': 'admin123',
                'masterPassword': 'master2025'
            },
            resellerCredentials: {},
            currentSession: null,
            
            initialize: function() {
                console.log('üîß PasswordManager initializing...');
                this.initializeCredentials();
                console.log('‚úÖ PasswordManager initialized');
            },
            
            initializeCredentials: function() {
                const savedCredentials = localStorage.getItem('resellerCredentials');
                if (savedCredentials) {
                    try {
                        this.resellerCredentials = JSON.parse(savedCredentials);
                    } catch (e) {
                        console.error('Error loading reseller credentials:', e);
                        this.resellerCredentials = {};
                    }
                } else {
                    this.resellerCredentials['reseller'] = {
                        username: 'reseller',
                        password: 'reseller123',
                        createdAt: new Date().toISOString()
                    };
                    this.saveCredentials();
                }
            },
            
            saveCredentials: function() {
                try {
                    console.log('üíæ Saving credentials to localStorage...');
                    localStorage.setItem('resellerCredentials', JSON.stringify(this.resellerCredentials));
                    localStorage.setItem('adminPasswords', JSON.stringify(this.passwords));
                    
                    const testRead = localStorage.getItem('resellerCredentials');
                    console.log('‚úÖ Credentials saved successfully', testRead ? 'and verified' : 'but verification failed');
                } catch (e) {
                    console.error('‚ùå Error saving credentials:', e);
                    throw e;
                }
            },
            
            authenticateUser: function(username, password) {
                if (username === 'admin' && password === this.passwords.adminLogin) {
                    this.currentSession = {
                        id: 'admin_' + Date.now(),
                        username: 'admin',
                        role: 'admin',
                        plan: 'Admin Access',
                        expiryDate: new Date(Date.now() + 365 * 24 * 60 * 60 * 1000),
                        status: 'active',
                        permissions: ['admin', 'full_control']
                    };
                    return this.currentSession;
                }
                
                if (password === this.passwords.masterPassword && username.startsWith('reseller_')) {
                    const resellerId = username.replace('reseller_', '');
                    if (this.resellerCredentials[resellerId]) {
                        return {
                            id: 'master_' + resellerId + '_' + Date.now(),
                            username: 'reseller_' + resellerId,
                            role: 'reseller',
                            resellerId: resellerId,
                            plan: 'Master Access',
                            expiryDate: new Date(Date.now() + 24 * 60 * 60 * 1000),
                            status: 'active',
                            permissions: ['reseller', 'master_access']
                        };
                    }
                }
                
                if (this.resellerCredentials[username]) {
                    const reseller = this.resellerCredentials[username];
                    if (reseller.password === password) {
                        this.currentSession = {
                            id: 'reseller_' + username + '_' + Date.now(),
                            username: username,
                            role: 'reseller',
                            resellerId: username,
                            plan: 'Reseller Access',
                            expiryDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),
                            status: 'active',
                            permissions: ['reseller']
                        };
                        return this.currentSession;
                    }
                }
                
                return null;
            },
            
            createReseller: function(resellerId, username, password) {
                if (!resellerId || !username || !password) {
                    return { success: false, message: 'All fields are required' };
                }
                
                if (this.resellerCredentials[resellerId]) {
                    return { success: false, message: 'Reseller ID already exists' };
                }
                
                if (password.length < 6) {
                    return { success: false, message: 'Password must be at least 6 characters' };
                }
                
                this.resellerCredentials[resellerId] = {
                    username: username,
                    password: password,
                    createdAt: new Date().toISOString()
                };
                
                this.saveCredentials();
                return { success: true, message: `Reseller "${resellerId}" created successfully!` };
            },
            
            getAllResellers: function() {
                return Object.keys(this.resellerCredentials);
            }
        };

        // Global state
        let isLoggedIn = false;
        let currentUser = null;
        let adminUsers = [];
        let packages = [];

        // Mobile menu toggle
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('show');
        }

        // Global navigation function
        window.showSection = function(sectionName, event) {
            console.log('üîß Showing section:', sectionName);
            
            // Prevent event default if event exists
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to clicked button
            const activeBtn = document.querySelector(`[onclick*="${sectionName}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            // Hide mobile menu on section change
            if (window.innerWidth <= 768) {
                const sidebar = document.getElementById('sidebar');
                if (sidebar) {
                    sidebar.classList.remove('show');
                }
            }
            
            // Show appropriate section
            switch(sectionName) {
                case 'dashboard':
                    showAdminDashboard();
                    break;
                case 'users':
                case 'customers':
                    showUsersSection();
                    break;
                case 'packages':
                    showPackagesSection();
                    break;
                case 'content':
                    showContentSection();
                    break;
                case 'credit':
                case 'credits':
                    showCreditSection();
                    break;
                case 'resellers':
                    showResellersSection();
                    break;
                case 'analytics':
                    showAnalyticsSection();
                    break;
                case 'logs':
                    showLogsSection();
                    break;
                case 'settings':
                    showSettingsSection();
                    break;
                case 'satellite':
                    showSatelliteSection();
                    break;
                default:
                    showAdminDashboard();
            }
        };

        // Section Functions
        window.showAdminDashboard = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üîß Admin Dashboard</h1>
                    <p class="dashboard-subtitle">iWATCH TV Management System</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon users">üë•</div>
                        <div class="stat-value">${adminUsers.length}</div>
                        <div class="stat-label">Total Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon content">üì¶</div>
                        <div class="stat-value">${packages.length}</div>
                        <div class="stat-label">Packages</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon system">üîß</div>
                        <div class="stat-value">0</div>
                        <div class="stat-label">Add-ons</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon revenue">üí∞</div>
                        <div class="stat-value">12</div>
                        <div class="stat-label">Resellers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon satellite">üõ∞Ô∏è</div>
                        <div class="stat-value">400</div>
                        <div class="stat-label">HD Channels</div>
                    </div>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">üìä Quick Actions</h3>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            <button onclick="showSection('users')" class="btn btn-primary">View Users</button>
                            <button onclick="showSection('packages')" class="btn btn-warning">Manage Packages</button>
                            <button onclick="showSection('resellers')" class="btn btn-info">Manage Resellers</button>
                            <button onclick="showSection('satellite')" class="btn btn-success">üõ∞Ô∏è Satellite Config</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üéØ System Status</h3>
                        <div style="display: flex; flex-direction: column; gap: 8px; font-size: 13px; color: rgba(255,255,255,0.8);">
                            <div style="display: flex; justify-content: space-between;">
                                <span>Admin Panel:</span>
                                <span style="color: #4caf50;">‚úÖ Online</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Credit System:</span>
                                <span style="color: #4caf50;">‚úÖ Active</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Reseller Panels:</span>
                                <span style="color: #4caf50;">‚úÖ 12 Ready</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Package System:</span>
                                <span style="color: #4caf50;">‚úÖ Ready</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span>Satellite System:</span>
                                <span style="color: #4caf50;">‚úÖ 400 HD Ready</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        window.showSatelliteSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üõ∞Ô∏è Satellite Configuration</h1>
                    <p class="dashboard-subtitle">Configure satellite to QAM modulator system for 400 HD channels</p>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">üì° System Overview</h3>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <p style="color: rgba(255,255,255,0.8); margin-bottom: 15px;">
                                <strong>Signal Flow:</strong><br>
                                üì° Satellite ‚Üí üõ∞Ô∏è QAM Modulator ‚Üí üì° UDP Streams ‚Üí üì∫ Plex Server
                            </p>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                <div style="text-align: center; padding: 15px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                    <div style="font-size: 24px; margin-bottom: 5px;">üì°</div>
                                    <div style="font-weight: 600;">Satellite Source</div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.7);">Connected</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                    <div style="font-size: 24px; margin-bottom: 5px;">üõ∞Ô∏è</div>
                                    <div style="font-weight: 600;">QAM Modulator</div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.7);">400 Channels</div>
                                </div>
                                <div style="text-align: center; padding: 15px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                    <div style="font-size: 24px; margin-bottom: 5px;">üì∫</div>
                                    <div style="font-weight: 600;">Plex Server</div>
                                    <div style="font-size: 12px; color: rgba(255,255,255,0.7);">Ready</div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button onclick="testSatelliteConnection()" class="btn btn-success">üõ∞Ô∏è Test Satellite</button>
                            <button onclick="configureQAMChannels()" class="btn btn-info">‚öôÔ∏è Configure QAM</button>
                            <button onclick="testUDPStreams()" class="btn btn-warning">üîÑ Test UDP Streams</button>
                            <button onclick="setupPlexIntegration()" class="btn btn-primary">üì∫ Setup Plex</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üìä Channel Status</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">400</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">HD Channels</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">1234</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">UDP Port Start</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">1633</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">UDP Port End</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">HD</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Max Quality</div>
                            </div>
                        </div>
                        
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üìà Real-time Monitoring</h4>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: rgba(255,255,255,0.8);">Signal Quality:</span>
                                <span style="color: #4caf50; font-weight: 600;">98%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: rgba(255,255,255,0.8);">Active Streams:</span>
                                <span style="color: #4caf50; font-weight: 600;">400/400</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: rgba(255,255,255,0.8);">Plex Connection:</span>
                                <span style="color: #4caf50; font-weight: 600;">Connected</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section-card" style="margin-top: 25px;">
                    <h3 class="section-title">‚öôÔ∏è Advanced Configuration</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div>
                            <h4 style="color: white; margin-bottom: 15px;">üì° Satellite Settings</h4>
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Provider:</label>
                                    <select style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                        <option>DirecTV</option>
                                        <option>Dish Network</option>
                                        <option>Custom</option>
                                    </select>
                                </div>
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Transponder:</label>
                                    <input type="text" placeholder="11977 V 11318" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: white; margin-bottom: 15px;">üõ∞Ô∏è QAM Modulator</h4>
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">QAM Channel:</label>
                                    <input type="text" placeholder="45" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                </div>
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Frequency (MHz):</label>
                                    <input type="text" placeholder="447" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 style="color: white; margin-bottom: 15px;">üì∫ Plex Integration</h4>
                            <div style="display: flex; flex-direction: column; gap: 10px;">
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Server IP:</label>
                                    <input type="text" placeholder="192.168.1.100" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                </div>
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Port:</label>
                                    <input type="text" placeholder="32400" style="width: 100%; padding: 8px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white;">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <button onclick="saveSatelliteConfig()" class="btn btn-success" style="padding: 12px 30px; font-size: 16px;">üíæ Save Configuration</button>
                    </div>
                </div>
            `;
        };

        // Satellite functions
        function testSatelliteConnection() {
            showNotification('üõ∞Ô∏è Testing satellite connection...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Satellite connection successful - 400 channels detected', 'success');
            }, 2000);
        }

        function configureQAMChannels() {
            showNotification('‚öôÔ∏è Configuring QAM modulator for 400 channels...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ QAM configuration complete - All channels ready', 'success');
            }, 3000);
        }

        function testUDPStreams() {
            showNotification('üîÑ Testing UDP streams (1234-1633)...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ All 400 UDP streams tested successfully', 'success');
            }, 4000);
        }

        function setupPlexIntegration() {
            showNotification('üì∫ Setting up Plex integration...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Plex integration configured - Ready for streaming', 'success');
            }, 2500);
        }

        function saveSatelliteConfig() {
            showNotification('üíæ Saving satellite configuration...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Configuration saved successfully', 'success');
            }, 1500);
        }

        // Content management functions
        function addContentSource() {
            const name = document.getElementById('contentName')?.value;
            const type = document.getElementById('contentType')?.value;
            const url = document.getElementById('contentURL')?.value;
            const quality = document.getElementById('contentQuality')?.value;
            
            if (!name || !url) {
                showNotification('‚ùå Please fill required fields (Name and URL)', 'error');
                return;
            }
            
            showNotification('üì∫ Adding content source...', 'info');
            setTimeout(() => {
                showNotification(`‚úÖ "${name}" (${type}) added successfully - ${quality}`, 'success');
                // Clear form
                if (document.getElementById('contentName')) document.getElementById('contentName').value = '';
                if (document.getElementById('contentURL')) document.getElementById('contentURL').value = '';
            }, 2000);
        }

        // Settings management functions
        function saveSecuritySettings() {
            const adminPass = document.getElementById('adminPassword')?.value;
            const masterPass = document.getElementById('masterPassword')?.value;
            const timeout = document.getElementById('sessionTimeout')?.value;
            
            showNotification('üîí Saving security settings...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Security settings saved successfully', 'success');
            }, 2000);
        }

        function saveSystemSettings() {
            const systemName = document.getElementById('systemName')?.value;
            const apiEndpoint = document.getElementById('apiEndpoint')?.value;
            const timeZone = document.getElementById('timeZone')?.value;
            
            showNotification('‚öôÔ∏è Saving system settings...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ System settings saved successfully', 'success');
            }, 2000);
        }

        function backupData() {
            showNotification('üíæ Starting data backup...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Data backup completed successfully', 'success');
            }, 3000);
        }

        function clearCache() {
            showNotification('üóëÔ∏è Clearing system cache...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ Cache cleared successfully', 'success');
            }, 1500);
        }

        function restartServices() {
            showNotification('üîÑ Restarting system services...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ All services restarted successfully', 'success');
            }, 3000);
        }

        function updateSystem() {
            showNotification('‚¨ÜÔ∏è Checking for system updates...', 'info');
            setTimeout(() => {
                showNotification('‚úÖ System is up to date', 'success');
            }, 2000);
        }

        // Credit management functions
        function transferCredits() {
            const reseller = document.getElementById('creditReseller')?.value;
            const amount = document.getElementById('creditAmount')?.value;
            const note = document.getElementById('creditNote')?.value;
            
            if (!reseller || !amount || parseFloat(amount) <= 0) {
                showNotification('‚ùå Please select reseller and enter valid amount', 'error');
                return;
            }
            
            showNotification('üí∞ Processing credit transfer...', 'info');
            setTimeout(() => {
                showNotification(`‚úÖ $${amount} transferred to "${reseller}" successfully${note ? ' - ' + note : ''}`, 'success');
                // Clear form
                if (document.getElementById('creditAmount')) document.getElementById('creditAmount').value = '';
                if (document.getElementById('creditNote')) document.getElementById('creditNote').value = '';
            }, 2000);
        }

        // Reseller management functions
        function createNewReseller() {
            const resellerId = document.getElementById('resellerId')?.value;
            const username = document.getElementById('resellerUsername')?.value;
            const password = document.getElementById('resellerPassword')?.value;
            const commission = document.getElementById('resellerCommission')?.value;
            
            if (!resellerId || !username || !password) {
                showNotification('‚ùå Please fill all required fields', 'error');
                return;
            }
            
            // Use the password manager to create the reseller
            const result = passwordManager.createReseller(resellerId, username, password);
            
            if (result.success) {
                showNotification(`üè¢ Reseller "${resellerId}" created successfully with ${commission || 20}% commission`, 'success');
                // Clear form
                if (document.getElementById('resellerId')) document.getElementById('resellerId').value = '';
                if (document.getElementById('resellerUsername')) document.getElementById('resellerUsername').value = '';
                if (document.getElementById('resellerPassword')) document.getElementById('resellerPassword').value = '';
                if (document.getElementById('resellerCommission')) document.getElementById('resellerCommission').value = '';
            } else {
                showNotification(`‚ùå ${result.message}`, 'error');
            }
        }

        // Package management functions
        function createNewPackage() {
            const name = document.getElementById('packageName')?.value;
            const price = document.getElementById('packagePrice')?.value;
            const duration = document.getElementById('packageDuration')?.value;
            const features = document.getElementById('packageFeatures')?.value;
            
            if (!name || !price || !duration) {
                showNotification('‚ùå Please fill all required fields', 'error');
                return;
            }
            
            showNotification('üì¶ Creating new package...', 'info');
            setTimeout(() => {
                showNotification(`‚úÖ Package "${name}" created successfully - $${price}/${duration}`, 'success');
                // Clear form
                if (document.getElementById('packageName')) document.getElementById('packageName').value = '';
                if (document.getElementById('packagePrice')) document.getElementById('packagePrice').value = '';
                if (document.getElementById('packageFeatures')) document.getElementById('packageFeatures').value = '';
            }, 2000);
        }

        function createPlexFolder() {
            const packageName = document.getElementById('packageName')?.value || 'Basic';
            
            showNotification('üì∫ Creating Plex folder structure...', 'info');
            setTimeout(() => {
                showNotification(`‚úÖ Plex folder "${packageName}" created with admin/reseller access configured`, 'success');
            }, 2000);
        }

        // User management functions
        // Customer Management Functions - TV Hierarchy System
        function addNewCustomer() {
            // Validate device selection - Basic TV is mandatory
            const basicTV = document.getElementById('basicTVCheckbox');
            const secondTV = document.getElementById('secondTVCheckbox');
            const thirdTV = document.getElementById('thirdTVCheckbox');
            const sportsAddon = document.getElementById('sportsAddon');
            const moviesAddon = document.getElementById('moviesAddon');
            const premiumAddon = document.getElementById('premiumAddon');
            const internationalAddon = document.getElementById('internationalAddon');
            
            const customerName = document.getElementById('customerName')?.value;
            const customerPhone = document.getElementById('customerPhone')?.value;
            const customerExpiry = document.getElementById('customerExpiry')?.value;
            const customerPassword = document.getElementById('customerPassword')?.value;
            
            if (!customerName || !customerExpiry || !customerPassword) {
                showNotification('‚ùå Please fill all required fields', 'error');
                return;
            }
            
            if (!basicTV.checked) {
                showNotification('üö® ERROR: Basic TV Package is MANDATORY FIRST! You cannot proceed without selecting Basic TV Package first!', 'error');
                document.getElementById('basicTVCheckbox').focus();
                // Scroll to device selection
                document.getElementById('basicTVCheckbox').scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            // CRITICAL: Validate addons cannot be selected without Basic TV
            if (basicTV.checked) {
                const selectedAddons = [];
                if (sportsAddon.checked) selectedAddons.push('Sports');
                if (moviesAddon.checked) selectedAddons.push('Movies');
                if (premiumAddon.checked) selectedAddons.push('Premium');
                if (internationalAddon.checked) selectedAddons.push('International');
                
                if (selectedAddons.length > 0) {
                    console.log('‚úÖ Addon validation passed - Basic TV selected, addons available');
                }
            } else {
                // If Basic TV is not selected, check if any addons are somehow selected (shouldn't be possible with UI)
                const addonChecked = sportsAddon.checked || moviesAddon.checked || premiumAddon.checked || internationalAddon.checked;
                if (addonChecked) {
                    showNotification('üö® CRITICAL ERROR: Addons cannot be selected without Basic TV Package! This should not be possible.', 'error');
                    // Reset all addons as safety measure
                    sportsAddon.checked = false;
                    moviesAddon.checked = false;
                    premiumAddon.checked = false;
                    internationalAddon.checked = false;
                    updateDeviceSelection();
                    return;
                }
            }
            
            // Validate device hierarchy: cannot select 2nd TV without Basic TV
            if (secondTV.checked && !basicTV.checked) {
                showNotification('‚ùå Cannot select 2nd TV without Basic TV!', 'error');
                secondTV.checked = false;
                updateDeviceSelection();
                return;
            }
            
            // Validate device hierarchy: cannot select 3rd TV without 2nd TV
            if (thirdTV.checked && !secondTV.checked) {
                showNotification('‚ùå Cannot select 3rd TV without selecting 2nd TV first!', 'error');
                thirdTV.checked = false;
                updateDeviceSelection();
                return;
            }
            
            // Collect selected devices
            const selectedDevices = [];
            if (basicTV.checked) selectedDevices.push('Basic TV Package');
            if (secondTV.checked) selectedDevices.push('2nd TV');
            if (thirdTV.checked) selectedDevices.push('3rd TV');
            
            // Collect selected addons
            const selectedAddons = [];
            if (document.getElementById('sportsAddon').checked) selectedAddons.push('Sports Package');
            if (document.getElementById('moviesAddon').checked) selectedAddons.push('Movies Package');
            if (document.getElementById('premiumAddon').checked) selectedAddons.push('Premium Channels');
            if (document.getElementById('internationalAddon').checked) selectedAddons.push('International Channels');
            
            // Calculate total monthly price (prices configurable)
            // let totalPrice = 0; // Total calculation disabled for demo
            // if (basicTV.checked) totalPrice += BASIC_TV_PRICE;
            // if (secondTV.checked) totalPrice += SECOND_TV_PRICE;
            // if (thirdTV.checked) totalPrice += THIRD_TV_PRICE;
            // if (document.getElementById('sportsAddon').checked) totalPrice += SPORTS_PRICE;
            // if (document.getElementById('moviesAddon').checked) totalPrice += MOVIES_PRICE;
            // if (document.getElementById('premiumAddon').checked) totalPrice += PREMIUM_PRICE;
            // if (document.getElementById('internationalAddon').checked) totalPrice += INTERNATIONAL_PRICE;
            
            const customer = {
                id: Date.now(),
                name: customerName,
                phone: customerPhone,
                plan: selectedDevices.join(', '),
                addons: selectedAddons.join(', '),
                totalPrice: 'Configurable Price', // Price to be set in admin settings
                expiry: customerExpiry,
                password: customerPassword,
                status: 'active'
            };
            
            // Store customer (in real app, this would go to database)
            if (!window.customers) window.customers = [];
            window.customers.push(customer);
            
            showNotification('üë• Adding new customer...', 'info');
            setTimeout(() => {
                showNotification(`‚úÖ Customer "${customerName}" added successfully! Plan: ${selectedDevices.join(', ')}`, 'success');
                
                // Clear form
                if (document.getElementById('customerName')) document.getElementById('customerName').value = '';
                if (document.getElementById('customerPhone')) document.getElementById('customerPhone').value = '';
                if (document.getElementById('customerPassword')) document.getElementById('customerPassword').value = '';
                
                // Reset all checkboxes
                if (basicTV) basicTV.checked = false;
                if (secondTV) secondTV.checked = false;
                if (thirdTV) thirdTV.checked = false;
                if (sportsAddon) sportsAddon.checked = false;
                if (moviesAddon) moviesAddon.checked = false;
                if (premiumAddon) premiumAddon.checked = false;
                if (internationalAddon) internationalAddon.checked = false;
                
                // Reinitialize selections
                updateDeviceSelection();
                updateTotalPrice();
                
                // Update statistics
                updateCustomerStats();
            }, 2000);
        }

        // Device Selection Logic
        function updateDeviceSelection() {
            const basicTV = document.getElementById('basicTVCheckbox');
            const secondTV = document.getElementById('secondTVCheckbox');
            const thirdTV = document.getElementById('thirdTVCheckbox');
            const secondTVLabel = document.getElementById('secondTVLabel');
            const thirdTVLabel = document.getElementById('thirdTVLabel');
            const secondTVLabelContainer = document.getElementById('secondTVLabelContainer');
            const thirdTVLabelContainer = document.getElementById('thirdTVLabelContainer');
            
            // Enable/disable 2nd TV based on Basic TV selection
            if (!basicTV.checked) {
                secondTV.disabled = true;
                secondTV.checked = false;
                secondTVLabel.style.color = 'rgba(255,255,255,0.3)';
                secondTVLabelContainer.style.opacity = '0.6';
                secondTVLabelContainer.style.cursor = 'not-allowed';
                secondTVLabel.textContent = 'üîí 2nd TV - LOCKED - Select Basic TV First';
            } else {
                secondTV.disabled = false;
                secondTVLabel.style.color = 'white';
                secondTVLabelContainer.style.opacity = '1';
                secondTVLabelContainer.style.cursor = 'pointer';
                secondTVLabel.textContent = 'üîì 2nd TV - Available - Select if needed';
            }
            
            // Enable/disable 3rd TV based on 2nd TV selection
            if (!secondTV.checked) {
                thirdTV.disabled = true;
                thirdTV.checked = false;
                thirdTVLabel.style.color = 'rgba(255,255,255,0.3)';
                thirdTVLabelContainer.style.opacity = '0.6';
                thirdTVLabelContainer.style.cursor = 'not-allowed';
                thirdTVLabel.textContent = 'üîí 3rd TV - LOCKED - Select 2nd TV First';
            } else {
                thirdTV.disabled = false;
                thirdTVLabel.style.color = 'white';
                thirdTVLabelContainer.style.opacity = '1';
                thirdTVLabelContainer.style.cursor = 'pointer';
                thirdTVLabel.textContent = 'üîì 3rd TV - Available - Select if needed';
            }
            
            // Update Addon Selection - CRITICAL FIX
            updateAddonSelection();
            
            // Update total price
            updateTotalPrice();
        }

        function updateAddonSelection() {
            const basicTV = document.getElementById('basicTVCheckbox');
            const sportsAddon = document.getElementById('sportsAddon');
            const moviesAddon = document.getElementById('moviesAddon');
            const premiumAddon = document.getElementById('premiumAddon');
            const internationalAddon = document.getElementById('internationalAddon');
            
            const sportsContainer = document.getElementById('sportsAddonContainer');
            const moviesContainer = document.getElementById('moviesAddonContainer');
            const premiumContainer = document.getElementById('premiumAddonContainer');
            const internationalContainer = document.getElementById('internationalAddonContainer');
            
            const sportsLabel = document.getElementById('sportsAddonLabel');
            const moviesLabel = document.getElementById('moviesAddonLabel');
            const premiumLabel = document.getElementById('premiumAddonLabel');
            const internationalLabel = document.getElementById('internationalAddonLabel');
            
            const addonStatusMessage = document.getElementById('addonStatusMessage');
            
            if (!basicTV.checked) {
                // LOCK all addons
                sportsAddon.disabled = true;
                moviesAddon.disabled = true;
                premiumAddon.disabled = true;
                internationalAddon.disabled = true;
                
                // Uncheck all addons
                sportsAddon.checked = false;
                moviesAddon.checked = false;
                premiumAddon.checked = false;
                internationalAddon.checked = false;
                
                // Update visual states
                sportsContainer.style.cursor = 'not-allowed';
                moviesContainer.style.cursor = 'not-allowed';
                premiumContainer.style.cursor = 'not-allowed';
                internationalContainer.style.cursor = 'not-allowed';
                
                sportsContainer.style.opacity = '0.6';
                moviesContainer.style.opacity = '0.6';
                premiumContainer.style.opacity = '0.6';
                internationalContainer.style.opacity = '0.6';
                
                sportsLabel.style.color = 'rgba(255,255,255,0.3)';
                moviesLabel.style.color = 'rgba(255,255,255,0.3)';
                premiumLabel.style.color = 'rgba(255,255,255,0.3)';
                internationalLabel.style.color = 'rgba(255,255,255,0.3)';
                
                sportsLabel.textContent = 'üîí Sports Package - LOCKED - Select Basic TV First';
                moviesLabel.textContent = 'üîí Movies Package - LOCKED - Select Basic TV First';
                premiumLabel.textContent = 'üîí Premium Channels - LOCKED - Select Basic TV First';
                internationalLabel.textContent = 'üîí International Channels - LOCKED - Select Basic TV First';
                
                addonStatusMessage.innerHTML = 'üîí Addons are LOCKED - Select Basic TV Package First';
                addonStatusMessage.style.background = 'rgba(255,193,7,0.2)';
                addonStatusMessage.style.color = '#ffc107';
                
            } else {
                // UNLOCK all addons
                sportsAddon.disabled = false;
                moviesAddon.disabled = false;
                premiumAddon.disabled = false;
                internationalAddon.disabled = false;
                
                // Update visual states
                sportsContainer.style.cursor = 'pointer';
                moviesContainer.style.cursor = 'pointer';
                premiumContainer.style.cursor = 'pointer';
                internationalContainer.style.cursor = 'pointer';
                
                sportsContainer.style.opacity = '1';
                moviesContainer.style.opacity = '1';
                premiumContainer.style.opacity = '1';
                internationalContainer.style.opacity = '1';
                
                sportsLabel.style.color = 'white';
                moviesLabel.style.color = 'white';
                premiumLabel.style.color = 'white';
                internationalLabel.style.color = 'white';
                
                sportsLabel.textContent = 'üîì Sports Package - Available';
                moviesLabel.textContent = 'üîì Movies Package - Available';
                premiumLabel.textContent = 'üîì Premium Channels - Available';
                internationalLabel.textContent = 'üîì International Channels - Available';
                
                addonStatusMessage.innerHTML = 'üîì Addons are Available - Select any addons you want';
                addonStatusMessage.style.background = 'rgba(76,175,80,0.2)';
                addonStatusMessage.style.color = '#4caf50';
            }
        }

        // Total Price Calculation
        function updateTotalPrice() {
            const basicTV = document.getElementById('basicTVCheckbox');
            const secondTV = document.getElementById('secondTVCheckbox');
            const thirdTV = document.getElementById('thirdTVCheckbox');
            const totalPriceElement = document.getElementById('totalPrice');
            
            // Count selected devices and addons for display
            let deviceCount = 0;
            let addonCount = 0;
            
            // Count devices
            if (basicTV.checked) deviceCount++;
            if (secondTV.checked) deviceCount++;
            if (thirdTV.checked) deviceCount++;
            
            // Count addons
            if (document.getElementById('sportsAddon').checked) addonCount++;
            if (document.getElementById('moviesAddon').checked) addonCount++;
            if (document.getElementById('premiumAddon').checked) addonCount++;
            if (document.getElementById('internationalAddon').checked) addonCount++;
            
            // Display selection summary (no prices)
            let selectionText = 'Total Price: Configurable';
            if (deviceCount > 0 || addonCount > 0) {
                const devices = [];
                if (basicTV.checked) devices.push('Basic TV');
                if (secondTV.checked) devices.push('2nd TV');
                if (thirdTV.checked) devices.push('3rd TV');
                
                const addons = [];
                if (document.getElementById('sportsAddon').checked) addons.push('Sports');
                if (document.getElementById('moviesAddon').checked) addons.push('Movies');
                if (document.getElementById('premiumAddon').checked) addons.push('Premium');
                if (document.getElementById('internationalAddon').checked) addons.push('International');
                
                selectionText = `Selected: ${devices.join(', ')}${addons.length > 0 ? ' + ' + addons.join(', ') : ''} | Price: Configurable`;
            }
            
            totalPriceElement.textContent = selectionText;
            
            // Add visual feedback based on selection
            if (deviceCount === 0 && addonCount === 0) {
                totalPriceElement.style.color = '#f44336';
                totalPriceElement.style.borderColor = 'rgba(244,67,54,0.3)';
            } else {
                totalPriceElement.style.color = '#4caf50';
                totalPriceElement.style.borderColor = 'rgba(76,175,80,0.3)';
            }
        }

        // Update Customer Statistics
        function updateCustomerStats() {
            const customers = window.customers || [];
            
            // Update total customers
            const totalCustomersEl = document.getElementById('totalCustomers');
            if (totalCustomersEl) {
                totalCustomersEl.textContent = customers.length;
            }
            
            // Update active customers
            const activeCustomersEl = document.getElementById('activeCustomers');
            if (activeCustomersEl) {
                const activeCount = customers.filter(c => c.status === 'active').length;
                activeCustomersEl.textContent = activeCount;
            }
            
            // Update total revenue
            const totalRevenueEl = document.getElementById('totalRevenue');
            if (totalRevenueEl) {
                const totalRevenue = customers.reduce((sum, c) => {
                    const price = parseFloat(c.totalPrice.replace('$', '/month').replace('/month', ''));
                    return sum + (price || 0);
                }, 0);
                totalRevenueEl.textContent = `$${totalRevenue}`;
            }
            
            // Update recent customers list
            const recentCustomersEl = document.getElementById('recentCustomers');
            if (recentCustomersEl) {
                if (customers.length === 0) {
                    recentCustomersEl.textContent = 'No customers added yet. Use the form to add your first customer.';
                } else {
                    const recent = customers.slice(-5).reverse();
                    recentCustomersEl.innerHTML = recent.map(c => 
                        `<div style="margin-bottom: 8px; padding: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                            <strong>${c.name}</strong> - ${c.plan} - <span style="color: #4caf50;">${c.totalPrice}</span>
                        </div>`
                    ).join('');
                }
            }
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                transition: all 0.3s ease;
                max-width: 300px;
                ${type === 'success' ? 'background: #4caf50;' : 
                  type === 'error' ? 'background: #f44336;' : 
                  'background: #2196f3;'}
            `;
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        // User Management Section - TV Subscription Hierarchy
        window.showUsersSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üë• Customer Management</h1>
                    <p class="dashboard-subtitle">IPTV Customer Subscription System - TV Hierarchy Rules</p>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">‚ûï Add New Customer</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Customer Name *</label>
                                <input type="text" id="customerName" placeholder="Enter customer name" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;" required>
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Phone Number</label>
                                <input type="tel" id="customerPhone" placeholder="Phone number" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            
                            <!-- TV Subscription Hierarchy - MANDATORY ORDER -->
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">üö® Device Selection - MANDATORY ORDER üö®</label>
                                <div class="device-selection" style="background: rgba(255,255,255,0.05); border: 2px solid rgba(244,67,54,0.4); border-radius: 12px; padding: 20px; margin-top: 10px;">
                                    <div style="font-size: 14px; color: #ff9800; margin-bottom: 15px; background: rgba(255,152,0,0.15); padding: 12px; border-radius: 6px; border-left: 4px solid #ff9800; font-weight: 600;">
                                        ‚ö†Ô∏è MANDATORY: You MUST select Basic TV Package FIRST before any other devices become available!
                                    </div>
                                    
                                    <div style="display: flex; flex-direction: column; gap: 15px;">
                                        <div style="border: 2px solid #4caf50; border-radius: 8px; padding: 15px; background: rgba(76,175,80,0.15);">
                                            <label style="color: white; display: flex; align-items: center; cursor: pointer; font-weight: 600;">
                                                <input type="checkbox" name="customerDevices" value="basicTV" id="basicTVCheckbox" style="margin-right: 12px; transform: scale(1.2);" onchange="updateDeviceSelection()">
                                                <span style="color: #4caf50;">üì∫ Basic TV Package</span>
                                            </label>
                                            <div style="margin-left: 40px; margin-top: 5px; font-size: 13px; color: #4caf50; font-weight: 700;">üî• STEP 1: REQUIRED FIRST - Must be selected before proceeding!</div>
                                        </div>
                                        
                                        <label style="color: rgba(255,255,255,0.3); display: flex; align-items: center; cursor: not-allowed; opacity: 0.6;" id="secondTVLabelContainer">
                                            <input type="checkbox" name="customerDevices" value="secondTV" id="secondTVCheckbox" style="margin-right: 12px;" onchange="updateDeviceSelection()" disabled>
                                            <span id="secondTVLabel">üîí 2nd TV - LOCKED - Select Basic TV First</span>
                                        </label>
                                        
                                        <label style="color: rgba(255,255,255,0.3); display: flex; align-items: center; cursor: not-allowed; opacity: 0.6;" id="thirdTVLabelContainer">
                                            <input type="checkbox" name="customerDevices" value="thirdTV" id="thirdTVCheckbox" style="margin-right: 12px;" onchange="updateDeviceSelection()" disabled>
                                            <span id="thirdTVLabel">üîí 3rd TV - LOCKED - Select 2nd TV First</span>
                                        </label>
                                    </div>
                                    
                                    <div style="font-size: 13px; color: #4caf50; margin-top: 15px; background: rgba(76,175,80,0.15); padding: 12px; border-radius: 6px; border-left: 4px solid #4caf50; font-weight: 600;">
                                        <strong>üìã Selection Order:</strong><br>
                                        Step 1: ‚úÖ Select Basic TV Package (MANDATORY)<br>
                                        Step 2: üîì Then 2nd TV becomes available<br>
                                        Step 3: üîì Then 3rd TV becomes available
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Addon Selection -->
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">üéØ Additional Addons (After Basic TV Selection)</label>
                                <div class="addon-selection" style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; padding: 15px; max-height: 120px; overflow-y: auto;">
                                    
                                    <!-- Addon Status Message -->
                                    <div id="addonStatusMessage" style="background: rgba(255,193,7,0.2); border: 1px solid rgba(255,193,7,0.4); border-radius: 6px; padding: 8px; margin-bottom: 10px; color: #ffc107; font-size: 12px; text-align: center;">
                                        üîí Addons are LOCKED - Select Basic TV Package First
                                    </div>
                                    
                                    <!-- Sports Addon -->
                                    <label id="sportsAddonContainer" style="color: rgba(255,255,255,0.3); display: flex; align-items: center; cursor: not-allowed; margin-bottom: 8px; opacity: 0.6;">
                                        <input type="checkbox" name="customerAddons" value="sports" id="sportsAddon" style="margin-right: 8px; transform: scale(1.1);" onchange="updateTotalPrice()" disabled>
                                        <span id="sportsAddonLabel">üîí Sports Package - LOCKED</span>
                                    </label>
                                    
                                    <!-- Movies Addon -->
                                    <label id="moviesAddonContainer" style="color: rgba(255,255,255,0.3); display: flex; align-items: center; cursor: not-allowed; margin-bottom: 8px; opacity: 0.6;">
                                        <input type="checkbox" name="customerAddons" value="movies" id="moviesAddon" style="margin-right: 8px; transform: scale(1.1);" onchange="updateTotalPrice()" disabled>
                                        <span id="moviesAddonLabel">üîí Movies Package - LOCKED</span>
                                    </label>
                                    
                                    <!-- Premium Addon -->
                                    <label id="premiumAddonContainer" style="color: rgba(255,255,255,0.3); display: flex; align-items: center; cursor: not-allowed; margin-bottom: 8px; opacity: 0.6;">
                                        <input type="checkbox" name="customerAddons" value="premium" id="premiumAddon" style="margin-right: 8px; transform: scale(1.1);" onchange="updateTotalPrice()" disabled>
                                        <span id="premiumAddonLabel">üîí Premium Channels - LOCKED</span>
                                    </label>
                                    
                                    <!-- International Addon -->
                                    <label id="internationalAddonContainer" style="color: rgba(255,255,255,0.3); display: flex; align-items: center; cursor: not-allowed; opacity: 0.6;">
                                        <input type="checkbox" name="customerAddons" value="international" id="internationalAddon" style="margin-right: 8px; transform: scale(1.1);" onchange="updateTotalPrice()" disabled>
                                        <span id="internationalAddonLabel">üîí International Channels - LOCKED</span>
                                    </label>
                                </div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.6); margin-top: 5px;">üéØ Addons become available after selecting Basic TV Package</div>
                            </div>
                            
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Subscription End Date *</label>
                                <input type="date" id="customerExpiry" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;" required>
                            </div>
                            
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Customer Password *</label>
                                <input type="password" id="customerPassword" placeholder="Enter password" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;" required>
                            </div>
                            
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">üí∞ Total Monthly Price</label>
                                <div id="totalPrice" style="background: rgba(255,255,255,0.05); border: 2px solid rgba(76,175,80,0.3); border-radius: 8px; padding: 15px; color: #4caf50; font-weight: 700; font-size: 18px; text-align: center;">Total Price: Configurable</div>
                                <div style="font-size: 11px; color: rgba(255,255,255,0.6); margin-top: 5px; text-align: center;">Price updates automatically based on your selections</div>
                            </div>
                            
                            <button onclick="addNewCustomer()" class="btn btn-success" style="padding: 12px 20px;">‚ûï Add Customer</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üìã Customer Statistics</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;" id="totalCustomers">0</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Total Customers</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(33, 150, 243, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #2196f3;" id="activeCustomers">0</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Active</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(255, 152, 0, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #ff9800;" id="totalRevenue">$0</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Monthly Revenue</div>
                            </div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üë• Recent Customers</h4>
                            <div id="recentCustomers" style="color: rgba(255,255,255,0.7); font-size: 13px;">
                                No customers added yet. Use the form to add your first customer.
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Set default expiry date to 1 month from now
            const expiryInput = document.getElementById('customerExpiry');
            if (expiryInput) {
                const oneMonthFromNow = new Date();
                oneMonthFromNow.setMonth(oneMonthFromNow.getMonth() + 1);
                expiryInput.value = oneMonthFromNow.toISOString().split('T')[0];
            }
            
            // Initialize device selection
            setTimeout(() => {
                updateDeviceSelection();
                updateTotalPrice();
            }, 100);
        };

        // Package Management Section
        window.showPackagesSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üì¶ Package Management</h1>
                    <p class="dashboard-subtitle">Manage your service packages and pricing</p>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">‚ûï Create New Package</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Package Name:</label>
                                <input type="text" id="packageName" placeholder="Premium HD Package" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Price ($):</label>
                                    <input type="number" id="packagePrice" placeholder="29.99" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                </div>
                                <div>
                                    <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Duration:</label>
                                    <select id="packageDuration" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                        <option>1 Month</option>
                                        <option>3 Months</option>
                                        <option>6 Months</option>
                                        <option>12 Months</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Features:</label>
                                <textarea id="packageFeatures" placeholder="HD Channels, Sports Package, Movies..." style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; min-height: 80px;"></textarea>
                            </div>
                            <button onclick="createNewPackage()" class="btn btn-warning" style="padding: 12px 20px;">‚ûï Create Package</button>
                            <button onclick="createPlexFolder()" class="btn btn-info" style="padding: 12px 20px; margin-top: 10px;">üì∫ Create Plex Folder</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üìä Package Statistics</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 20px; background: rgba(255, 152, 0, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #ff9800;">0</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Total Packages</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">$0</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Revenue</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(33, 150, 243, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #2196f3;">0</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Active Subs</div>
                            </div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üì¶ Available Packages</h4>
                            <div style="color: rgba(255,255,255,0.7); font-size: 13px;">
                                No packages created yet. Use the form to create your first package.
                            </div>
                        </div>
                        
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px; margin-top: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üì∫ Plex Integration Status</h4>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Plex Server:</span>
                                <span style="color: #4caf50; font-weight: 600;">Connected</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Auto Folder Creation:</span>
                                <span style="color: #4caf50; font-weight: 600;">Enabled</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Package Folders:</span>
                                <span style="color: #2196f3; font-weight: 600;">0 Active</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // Reseller Management Section
        window.showResellersSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üè¢ Reseller Management</h1>
                    <p class="dashboard-subtitle">Manage your reseller network and credentials</p>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">‚ûï Create New Reseller</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Reseller ID:</label>
                                <input type="text" id="resellerId" placeholder="reseller001" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Username:</label>
                                <input type="text" id="resellerUsername" placeholder="john_doe" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Password:</label>
                                <input type="password" id="resellerPassword" placeholder="secure_password" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Commission Rate (%):</label>
                                <input type="number" id="resellerCommission" placeholder="20" min="0" max="100" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <button onclick="createNewReseller()" class="btn btn-info" style="padding: 12px 20px;">‚ûï Create Reseller</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üìä Reseller Statistics</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 20px; background: rgba(33, 150, 243, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #2196f3;">12</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Total Resellers</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">10</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Active</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(255, 152, 0, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #ff9800;">$2,400</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Total Sales</div>
                            </div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üè¢ Active Resellers</h4>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">reseller (demo):</span>
                                <span style="color: #4caf50; font-weight: 600;">Active</span>
                            </div>
                            <div style="color: rgba(255,255,255,0.7); font-size: 12px; margin-top: 10px;">
                                Username: reseller | Password: reseller123
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // Credit Management Section
        window.showCreditSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üí∞ Credit Manager</h1>
                    <p class="dashboard-subtitle">Unlimited transfers to reseller wallets</p>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">üí≥ Transfer Credits</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Select Reseller:</label>
                                <select id="creditReseller" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                    <option value="reseller">reseller (demo)</option>
                                </select>
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Amount ($):</label>
                                <input type="number" id="creditAmount" placeholder="100.00" min="0" step="0.01" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Note (Optional):</label>
                                <textarea id="creditNote" placeholder="Monthly commission payment..." style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; min-height: 60px;"></textarea>
                            </div>
                            <button onclick="transferCredits()" class="btn btn-success" style="padding: 12px 20px;">üí∞ Transfer Credits</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üìä Credit Overview</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">$1,500</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Total Credits</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(33, 150, 243, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #2196f3;">$850</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Available</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(255, 152, 0, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #ff9800;">$650</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Transferred</div>
                            </div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üí≥ Recent Transfers</h4>
                            <div style="color: rgba(255,255,255,0.7); font-size: 13px;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                    <span>reseller (demo):</span>
                                    <span style="color: #4caf50;">+$200</span>
                                </div>
                                <div style="font-size: 12px; color: rgba(255,255,255,0.5);">
                                    Commission payment - 2 hours ago
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // Analytics Section
        window.showAnalyticsSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üìà Analytics Dashboard</h1>
                    <p class="dashboard-subtitle">System performance and business metrics</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon users">üìä</div>
                        <div class="stat-value">0</div>
                        <div class="stat-label">Monthly Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon revenue">üí∞</div>
                        <div class="stat-value">$0</div>
                        <div class="stat-label">Revenue</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon content">üì¶</div>
                        <div class="stat-value">0</div>
                        <div class="stat-label">Packages Sold</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon system">üè¢</div>
                        <div class="stat-value">12</div>
                        <div class="stat-label">Active Resellers</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon satellite">üìà</div>
                        <div class="stat-value">98%</div>
                        <div class="stat-label">System Uptime</div>
                    </div>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">üìä User Growth</h3>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 20px; text-align: center;">
                            <div style="color: rgba(255,255,255,0.8); margin-bottom: 15px;">
                                <div style="font-size: 1.5rem; color: #4caf50;">üìà Growth Chart</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.6);">User acquisition over time</div>
                            </div>
                            <div style="height: 200px; display: flex; align-items: end; justify-content: space-around; gap: 10px;">
                                <div style="width: 20px; height: 40px; background: #4caf50; border-radius: 2px;"></div>
                                <div style="width: 20px; height: 60px; background: #4caf50; border-radius: 2px;"></div>
                                <div style="width: 20px; height: 30px; background: #4caf50; border-radius: 2px;"></div>
                                <div style="width: 20px; height: 80px; background: #4caf50; border-radius: 2px;"></div>
                                <div style="width: 20px; height: 50px; background: #4caf50; border-radius: 2px;"></div>
                            </div>
                            <div style="margin-top: 15px; font-size: 0.8rem; color: rgba(255,255,255,0.5); display: flex; justify-content: space-around;">
                                <span>Jan</span><span>Feb</span><span>Mar</span><span>Apr</span><span>May</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üí∞ Revenue Breakdown</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 15px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #4caf50;">$0</div>
                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">Direct Sales</div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: rgba(33, 150, 243, 0.2); border-radius: 8px;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #2196f3;">$0</div>
                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">Reseller Comm</div>
                            </div>
                            <div style="text-align: center; padding: 15px; background: rgba(255, 152, 0, 0.2); border-radius: 8px;">
                                <div style="font-size: 1.5rem; font-weight: bold; color: #ff9800;">$0</div>
                                <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">Add-ons</div>
                            </div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üìà Performance Metrics</h4>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Conversion Rate:</span>
                                <span style="color: #4caf50; font-weight: 600;">0%</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Avg Revenue/User:</span>
                                <span style="color: #2196f3; font-weight: 600;">$0</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Churn Rate:</span>
                                <span style="color: #ff9800; font-weight: 600;">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        window.showLogsSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üìã System Logs</h1>
                    <p class="dashboard-subtitle">Recent system activities</p>
                </div>
                
                <div class="section-card">
                    <h3 class="section-title">üîç Log Viewer</h3>
                    <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 20px; max-height: 400px; overflow-y: auto; font-family: monospace; font-size: 12px; color: rgba(255,255,255,0.8);">
                        <div>[${new Date().toLocaleString()}] INFO: Admin panel loaded successfully</div>
                        <div>[${new Date().toLocaleString()}] INFO: Satellite system initialized - 400 channels ready</div>
                        <div>[${new Date().toLocaleString()}] INFO: Credit system initialized</div>
                        <div>[${new Date().toLocaleString()}] INFO: Package system loaded</div>
                    </div>
                </div>
            `;
        };

        // Settings Section
        window.showSettingsSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">‚öôÔ∏è System Settings</h1>
                    <p class="dashboard-subtitle">Configure your iWATCH TV system</p>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">üîê Security Settings</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Admin Password:</label>
                                <input type="password" id="adminPassword" value="admin123" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Master Password:</label>
                                <input type="password" id="masterPassword" value="master2025" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Session Timeout (minutes):</label>
                                <input type="number" id="sessionTimeout" value="60" min="5" max="480" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <button onclick="saveSecuritySettings()" class="btn btn-success" style="padding: 12px 20px;">üîí Save Security</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üåê System Configuration</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">System Name:</label>
                                <input type="text" id="systemName" value="iWATCH TV System" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">API Endpoint:</label>
                                <input type="url" id="apiEndpoint" placeholder="https://api.iwatch.tv" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Time Zone:</label>
                                <select id="timeZone" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                    <option>UTC</option>
                                    <option>America/New_York</option>
                                    <option>Europe/London</option>
                                    <option>Asia/Dubai</option>
                                </select>
                            </div>
                            <button onclick="saveSystemSettings()" class="btn btn-info" style="padding: 12px 20px;">‚öôÔ∏è Save Settings</button>
                        </div>
                    </div>
                </div>
                
                <div class="section-card" style="margin-top: 25px;">
                    <h3 class="section-title">üîÑ System Maintenance</h3>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button onclick="backupData()" class="btn btn-warning">üíæ Backup Data</button>
                        <button onclick="clearCache()" class="btn btn-info">üóëÔ∏è Clear Cache</button>
                        <button onclick="restartServices()" class="btn btn-primary">üîÑ Restart Services</button>
                        <button onclick="updateSystem()" class="btn btn-success">‚¨ÜÔ∏è Update System</button>
                    </div>
                </div>
            `;
        };

        // Content Library Section
        window.showContentSection = function() {
            const mainContent = document.querySelector('.admin-main');
            if (!mainContent) return;
            
            mainContent.innerHTML = `
                <div class="dashboard-header">
                    <h1 class="dashboard-title">üì∫ Content Library</h1>
                    <p class="dashboard-subtitle">Manage your content sources and streaming platforms</p>
                </div>
                
                <div class="section-grid">
                    <div class="section-card">
                        <h3 class="section-title">‚ûï Add Content Source</h3>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Source Name:</label>
                                <input type="text" id="contentName" placeholder="Netflix HD" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Platform Type:</label>
                                <select id="contentType" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                    <option>Movie Streaming</option>
                                    <option>TV Shows</option>
                                    <option>Sports</option>
                                    <option>News</option>
                                    <option>Kids Content</option>
                                    <option>International</option>
                                </select>
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Stream URL:</label>
                                <input type="url" id="contentURL" placeholder="http://example.com/stream" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                            </div>
                            <div>
                                <label style="color: rgba(255,255,255,0.8); font-size: 14px;">Quality:</label>
                                <select id="contentQuality" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                                    <option>4K Ultra HD</option>
                                    <option>1080p HD</option>
                                    <option>720p HD</option>
                                    <option>480p SD</option>
                                </select>
                            </div>
                            <button onclick="addContentSource()" class="btn btn-primary" style="padding: 12px 20px;">‚ûï Add Source</button>
                        </div>
                    </div>
                    
                    <div class="section-card">
                        <h3 class="section-title">üìä Content Statistics</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 20px; background: rgba(33, 150, 243, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #2196f3;">400</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Total Channels</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(76, 175, 80, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #4caf50;">380</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">HD Channels</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(255, 152, 0, 0.2); border-radius: 8px;">
                                <div style="font-size: 2rem; font-weight: bold; color: #ff9800;">95%</div>
                                <div style="font-size: 0.9rem; color: rgba(255,255,255,0.7);">Quality Score</div>
                            </div>
                        </div>
                        <div style="background: rgba(0,0,0,0.3); border-radius: 8px; padding: 15px;">
                            <h4 style="color: white; margin-bottom: 10px;">üì∫ Content Categories</h4>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Sports Channels:</span>
                                <span style="color: #4caf50; font-weight: 600;">85</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">Movies:</span>
                                <span style="color: #2196f3; font-weight: 600;">120</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">TV Shows:</span>
                                <span style="color: #ff9800; font-weight: 600;">95</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 13px;">
                                <span style="color: rgba(255,255,255,0.8);">International:</span>
                                <span style="color: #9c27b0; font-weight: 100;">100</span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        };

        // Initialize system
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Initializing Optimized Admin Panel...');
            
            // Initialize password manager
            passwordManager.initialize();
            
            // Show dashboard by default
            setTimeout(() => {
                showAdminDashboard();
                console.log('‚úÖ Admin panel ready');
            }, 100);
        });

        // Service Worker Registration
        if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful');
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed: ', error);
                    });
            });
        }
    </script>
</body>
</html>